# Asset-Change-Provider

## Запуск  через docker `make up`, предварительно заполнив .env использую .env.example

## Основной функционал сервиса - получение уведомлений о резких движениях активов в реальном времени. 
### Сервис provider. Имеет несколько функциональных зон. 
#### 1. Взаимодействия с клиентом по api, для запуска/завершения мониторинга активов, через отправку сообщения в очередь, которую слушает сервис aggregator. В теле запроса передается идентификатор пользователя (на данный момент telegram_id), список активов, таймфрейм относительно которого осуществляется расчет процента изменения актива, список уровней в процентах (для отправки уведомлений по разным каналам передачи).
#### 2. Прослушивание очередей с изменениями цен, отправка уведомлений в телеграмм.  На данный момент реализовано 3 уровня изменения, и все отправляют уведомления в телеграмм, в дальнейшем данную логику можно изменить и отправлять уведомления в зависимости от уровня(телеграмм, почта, телефон и тд)
### Сервис aggregator. 
#### Занимается получением данных через очередь rabbitmq (commands) и запуском мониторинга цены актива/активов через websocket для переданного пользователя. У каждого пользователя может быть только одна активная сессия мониторинга. После получения актуальных котировок актива, происходит расчет процента изменения относительно переданного таймфрейма. После расчета выбирается необходимый уровень изменения, и сигнал отправляется в соответствующую очередь (rabbitmq). На данный момент реализовано 3 очереди (уровня изменения), но данный функционал легко масштабируется
